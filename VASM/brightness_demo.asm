; Демонстрация работы с яркостью отдельных пикселей
BANK 0
JMP SETUP

:SETUP
    CLEAR           ; Очищаем экран
    SET R1 0        ; X координата
    SET R2 8        ; Y координата (середина экрана)
    SET R3 255      ; Начальная яркость
    SET R4 16       ; Шаг уменьшения яркости

:DRAW_LINE
    SETPX R1 R2 R3  ; Рисуем пиксель с яркостью из R3
    
    ; Уменьшаем яркость
    SUB R3 R4       ; R3 -= 16
    
    ; Переходим к следующему X
    SET R4 1
    ADD R1 R4       ; R1 += 1
    SET R4 16       ; Возвращаем шаг яркости
    
    ; Проверяем конец экрана
    SET R4 15
    CMP R1 R4
    JNE DRAW_LINE   ; Если не достигли края, продолжаем

:LOOP
    ; Ждем нажатия ESC
    GETKEY R4
    SET R3 27       ; Код ESC
    CMP R4 R3
    JNE LOOP

:END
    HLT 