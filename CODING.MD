# Документация по ассемблеру VCPU

## Регистры
- R1-R6: Регистры общего назначения (8 бит)

## Инструкции

### Базовые операции
- `NOP` - Нет операции
- `SET REG VAL` - Установить значение VAL в регистр REG
- `MOV REG1 REG2` - Копировать значение из REG2 в REG1
- `ADD REG1 REG2` - REG1 = REG1 + REG2
- `SUB REG1 REG2` - REG1 = REG1 - REG2
- `MUL REG1 REG2` - REG1 = REG1 * REG2
- `DIV REG1 REG2` - REG1 = REG1 / REG2, R4 = остаток
- `AND REG1 REG2` - Побитовое И
- `OR REG1 REG2` - Побитовое ИЛИ
- `XOR REG1 REG2` - Побитовое исключающее ИЛИ
- `CMP REG1 REG2` - Сравнить REG1 и REG2 (устанавливает флаг)

### Управление памятью
- `STOREV ADDR VAL` - Сохранить значение VAL по адресу ADDR
- `STORER ADDR REG` - Сохранить значение из REG по адресу ADDR
- `LOADR REG ADDR` - Загрузить значение из адреса ADDR в REG
- `PUSH REG` - Положить значение из REG в стек
- `POP REG` - Извлечь значение из стека в REG

### Переходы и ветвления
- `JMP ADDR` - Безусловный переход
- `JE ADDR` - Переход если равно (флаг = 0)
- `JNE ADDR` - Переход если не равно (флаг = 1)
- `CALL ADDR` - Вызов подпрограммы
- `RET` - Возврат из подпрограммы

### Работа с дисплеем
- `SETPX REG1 REG2 [REG3]` - Установить пиксель (x=REG1, y=REG2) с яркостью из REG3
- `CLRPX REG1 REG2` - Очистить пиксель (x=REG1, y=REG2)
- `DIGIT REG1 REG2` - Вывести число на сегментный дисплей
  - Если REG1=0: вывести полное число из REG2 (дополняется нулями слева)
  - Иначе: вывести одну цифру из REG2 в позицию REG1
- `BRIGHT REG` - Установить яркость из значения в REG (0-255)
- `CLEAR` - Очистить все дисплеи

### Ввод с клавиатуры
- `GETKEY REG` - Получить код нажатой клавиши в REG
- `SAVKEY ADDR` - Установить адрес для автосохранения кодов клавиш

### Управление банками памяти
- `BANK NUM` - Переключить текущий банк памяти (0-3)

### Прочее
- `RND REG LIMIT` - Случайное число от 0 до LIMIT в REG
- `HLT` - Остановка программы

## Коды клавиш
- 0-9: Цифровые клавиши
- 10: Минус (-)
- 11: Подчеркивание (_)
- 12: Пробел
- 13: ESC
- 14: DEL
- 15: ENTER
- 16: Стрелка вверх
- 17: Стрелка вниз
- 18: Стрелка вправо
- 19: Стрелка влево

## Примеры

### Вывод числа на дисплей
```asm
SET R1 0       ; Позиция 0 - вывод полного числа
SET R2 123     ; Число для вывода
DIGIT R1 R2    ; На дисплее: 00000123
```

### Рисование пикселя с яркостью
```asm
SET R1 5       ; X координата
SET R2 10      ; Y координата
SET R3 128     ; Яркость (половинная)
SETPX R1 R2 R3 ; Рисуем пиксель
```